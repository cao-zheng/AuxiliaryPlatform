<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="/css/index.css">
    <script src="/js/axios.js"></script>
    <!-- import Vue before Element -->
    <script src="/js/vue.js"></script>
    <!-- import JavaScript -->
    <script src="/js/index.js"></script>
</head>
<body>
<div id="app">
    <template>
        <el-form ref="form" :model="sysJobConfig" label-width="80px">
            <el-form-item label="任务名称">
                <el-input v-model="sysJobConfig.name"/>
            </el-form-item>
            <el-form-item label="作用类名称">
                <el-input v-model="sysJobConfig.beanName"/>
            </el-form-item>
            <el-form-item label="方法名称">
                <el-input v-model="sysJobConfig.methodName"/>
            </el-form-item>
            <el-form-item label="方法参数">
                <el-input v-model="sysJobConfig.methodParams"/>
            </el-form-item>
            <el-form-item label="cron表达式">
                <el-input v-model="sysJobConfig.cronExpression"/>
            </el-form-item>
            <el-form-item label="状态">
                <el-input v-model="sysJobConfig.jobStatus"/>
            </el-form-item>
            <el-form-item label="备注">
                <el-input v-model="sysJobConfig.remark"/>
            </el-form-item>
            <el-form-item>
                <el-button type="primary" @click="onSubmit">立即创建</el-button>
                <el-button>取消</el-button>
            </el-form-item>
        </el-form>
    </template>
</div>
</body>
<script>
    new Vue({
        el: '#app',
        data: function() {
            return {
                sysJobConfig : {
                    name:"",
                    beanName:"",
                    methodName:"",
                    methodParams:"",
                    cronExpression:"",
                    jobStatus:"",
                    remark:"",
                }
            }
        },
        methods:{
            onSubmit:function() {
                axios({
                    url: '/task/save',
                    method: 'post',
                    data: this.sysJobConfig,
                    transformRequest: [data=>{
                        let ret = ''
                        for (let it in data) {
                            ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'
                        }
                        return ret
                    }],
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    }
                })
            }
        }
    })
</script>
</html>